"use strict";(self["webpackChunkcafe_today"]=self["webpackChunkcafe_today"]||[]).push([[27],{9737:function(e,t,s){s(4114),s(8992),s(4520),s(2577),s(8872),s(7550);var c=s(2261);const l=(0,c.nY)("save",{state:()=>({items:[],selectedItems:[]}),getters:{totalAmount:e=>e.items.reduce(((e,t)=>e+t.address),0),itemCount:e=>e.items.length},actions:{addToSave(e){const t=JSON.parse(localStorage.getItem("savedCafes")||"[]"),s=t.some((t=>t.id===e.id));if(s)return void alert("此咖啡店已在你的私藏巡禮中！");const c=this.items.find((t=>t.id===e.id));c||this.items.push({id:e.id,name:e.name,city:e.city,address:e.address,open_time:e.open_time})},removeFromSave(e){this.items=this.items.filter((t=>t.id!==e)),this.selectedItems=this.selectedItems.filter((t=>t!==e))},toggleSelectItem(e){const t=this.selectedItems.indexOf(e);-1===t?this.selectedItems.push(e):this.selectedItems.splice(t,1)},removeSelectedItems(){this.items=this.items.filter((e=>!this.selectedItems.includes(e.id))),this.selectedItems=[]},clearSave(){this.items=[],this.selectedItems=[]},checkout(){let e=JSON.parse(localStorage.getItem("savedCafes")||"[]");e=[...e,...this.items],localStorage.setItem("savedCafes",JSON.stringify(e)),alert(`收藏成功！總共收藏 ${this.itemCount} 間咖啡店`),this.clearSave()}}});t.A=l},4027:function(e,t,s){s.r(t),s.d(t,{default:function(){return w}});var c=s(6768),l=(s(1454),s(4232)),i=s(9737);const a={class:"card"},d={class:"card-container"},o=["id","checked","onChange"],n=["for"],r={class:"card-text"},u={class:"dark-text"},m={class:"light-bold-text-xs"},v={class:"dark-text-xs"},k={class:"dark-text-xs"},h=["onClick"];var g={__name:"SaveItem",props:{items:{type:Array,required:!0},isSelected:{type:Function,required:!0},toggleSelect:{type:Function,required:!0},removeItem:{type:Function,required:!0}},setup(e){return(t,s)=>((0,c.uX)(),(0,c.CE)("div",a,[(0,c.Lk)("div",d,[((0,c.uX)(!0),(0,c.CE)(c.FK,null,(0,c.pI)(e.items,(t=>((0,c.uX)(),(0,c.CE)("div",{key:t.id,class:"flex items-center"},[(0,c.Lk)("input",{type:"checkbox",id:`item-${t.id}`,class:"checkbox",checked:e.isSelected(t.id),onChange:s=>e.toggleSelect(t.id)},null,40,o),(0,c.Lk)("label",{for:`item-${t.id}`,class:"light-bold-text-xs"},null,8,n),(0,c.Lk)("div",r,[(0,c.Lk)("h3",u,(0,l.v_)(t.name),1),(0,c.Lk)("p",m,(0,l.v_)(t.city),1),(0,c.Lk)("p",v,(0,l.v_)(t.address),1),(0,c.Lk)("p",k,(0,l.v_)(t.open_time),1)]),(0,c.Lk)("button",{onClick:s=>e.removeItem(t.id),class:"button click-color-mid"}," 刪除 ",8,h)])))),128))])]))}},p=s(1241);const b=(0,p.A)(g,[["__scopeId","data-v-1c2d7d09"]]);var f=b;const I={class:""},C={key:0,class:"no-data-bg"},L={key:1},x={class:"card-bg"},S={class:"flex items-center"},_=["checked"],y={class:"save-count-bg"},E={class:"save-count-container"},F={class:"light-bold-text-xl"};var X={__name:"SaveList",setup(e){const t=(0,i.A)(),s=(0,c.EW)((()=>t.items)),a=(0,c.EW)((()=>t.selectedItems)),d=(0,c.EW)((()=>t.itemCount)),o=e=>a.value.includes(e),n=e=>{t.toggleSelectItem(e)},r=e=>{e.target.checked?t.selectedItems=s.value.map((e=>e.id)):t.selectedItems=[]},u=e=>{t.removeFromSave(e)},m=()=>{t.removeSelectedItems()},v=()=>{t.checkout()};return(e,t)=>{const i=(0,c.g2)("router-link");return(0,c.uX)(),(0,c.CE)("div",I,[t[4]||(t[4]=(0,c.Lk)("h2",{class:"title"},"收藏起來",-1)),s.value.length?((0,c.uX)(),(0,c.CE)("div",L,[(0,c.Lk)("div",x,[(0,c.Lk)("div",S,[(0,c.Lk)("input",{type:"checkbox",id:"select-all",class:"checkbox",checked:a.value.length===s.value.length,onChange:r},null,40,_),t[2]||(t[2]=(0,c.Lk)("label",{for:"select-all",class:"light-bold-text"},"全選",-1))]),a.value.length>0?((0,c.uX)(),(0,c.CE)("button",{key:0,onClick:m,class:"button click-color-mid"}," 刪除已選項目 ")):(0,c.Q3)("",!0)]),(0,c.bF)(f,{items:s.value,"is-selected":o,"toggle-select":n,"remove-item":u},null,8,["items"]),(0,c.Lk)("div",y,[(0,c.Lk)("div",E,[t[3]||(t[3]=(0,c.Lk)("span",{class:"light-bold-text"},"總共收藏咖啡店:",-1)),(0,c.Lk)("span",F,"共 "+(0,l.v_)(d.value)+" 間",1)])]),(0,c.Lk)("div",{class:"checkout"},[(0,c.Lk)("button",{onClick:v,class:"button click-color-light"}," 確定收藏到你的私藏咖啡巡禮 ")])])):((0,c.uX)(),(0,c.CE)("div",C,[t[1]||(t[1]=(0,c.Lk)("p",{class:"no-data-text"},"你的收藏清單是空的",-1)),(0,c.bF)(i,{to:"/list/listTaichung",href:"#",class:"button click-color-mid"},{default:(0,c.k6)((()=>t[0]||(t[0]=[(0,c.eW)(" 瀏覽咖啡店列表 ")]))),_:1})]))])}}};const A=(0,p.A)(X,[["__scopeId","data-v-35b88cff"]]);var q=A,O={__name:"SaveListView",setup(e){return(e,t)=>((0,c.uX)(),(0,c.CE)("div",null,[(0,c.bF)(q)]))}};const W=O;var w=W}}]);