"use strict";(self["webpackChunkcafe_today"]=self["webpackChunkcafe_today"]||[]).push([[699],{7258:function(e,l,a){a.d(l,{A:function(){return s}});var t=a(144);function s(e){const l=(0,t.KR)(!1),a=(0,t.KR)(!1),s=(0,t.KR)(""),o=function(e){return new Promise((l=>{setTimeout((()=>{console.log(`已等待 ${e} 毫秒`),l()}),e)}))},n=async function(){l.value=!0,a.value=!1,s.value="";try{await o(3e3);const l=Math.floor(Math.random()*e.value.length);s.value=e.value[l],a.value=!0}catch(t){console.error("抽籤過程發生錯誤:",t)}finally{l.value=!1}};return{selectedShop:s,isDestiny:l,isDestinyDone:a,getDestinyShop:n}}},5785:function(e,l,a){a.d(l,{A:function(){return s}});var t=a(144);function s(){const e=(0,t.KR)(!1),l=(0,t.KR)(""),a=(0,t.KR)("success"),s=(t,s="success")=>{l.value=t,a.value=s,e.value=!0},o=()=>{e.value=!1};return{showModal:e,modalMessage:l,modalType:a,openModal:s,closeModal:o}}},2136:function(e,l,a){a.d(l,{A:function(){return d}});var t=a(6768),s=a(4232);const o={key:0,class:"modal-overlay"},n={class:"modal-type"},c={class:"modal-message light-bold-text"};var i={__name:"ModalBox",props:{visible:Boolean,message:String,type:{type:String,default:"success"}},emits:["close"],setup(e,{emit:l}){const a=e,i=(0,t.EW)((()=>"success"===a.type?"modal-text-green":"modal-text-red")),u=(0,t.EW)((()=>"success"===a.type?"成功！":"錯誤！")),r=l,d=()=>{r("close")};return(l,a)=>e.visible?((0,t.uX)(),(0,t.CE)("div",o,[(0,t.Lk)("div",{class:(0,s.C4)(["modal-box",i.value])},[(0,t.Lk)("p",n,(0,s.v_)(u.value),1),(0,t.Lk)("p",c,(0,s.v_)(e.message),1),(0,t.Lk)("button",{class:"button click-color-light",onClick:d},"確定")],2)])):(0,t.Q3)("",!0)}},u=a(1241);const r=(0,u.A)(i,[["__scopeId","data-v-584854f8"]]);var d=r},6176:function(e,l,a){a.r(l),a.d(l,{default:function(){return x}});var t=a(6768),s=a(4232),o=a(5130),n=a.p+"img/teaAndBook.0b869572.png";const c={class:"screen-center"},i={class:"container"},u=["value"],r={key:0,class:"table-border"},d=["id"],v={class:"table-td border-b"},b={class:"table-td border-b"},p={class:"table-td border-b"},y=["href"],h={class:"table-td border-b"},k={class:"checkout"},g=["disabled"];function m(e,l,a,m,f,L){const C=(0,t.g2)("LoadingOverlay"),_=(0,t.g2)("ModalBox");return(0,t.uX)(),(0,t.CE)(t.FK,null,[(0,t.bF)(C,{active:m.isLoading,color:"#79716b"},null,8,["active"]),(0,t.Lk)("div",c,[l[10]||(l[10]=(0,t.Lk)("p",{class:"slogan"},"尋找你的咖啡靈魂",-1)),(0,t.Lk)("div",i,[l[3]||(l[3]=(0,t.Lk)("label",{for:"dropdown",class:"label"},"選擇城市：",-1)),(0,t.bo)((0,t.Lk)("select",{id:"dropdown","onUpdate:modelValue":l[0]||(l[0]=e=>m.selectedCity=e),class:"select"},[((0,t.uX)(!0),(0,t.CE)(t.FK,null,(0,t.pI)(m.options,(e=>((0,t.uX)(),(0,t.CE)("option",{key:e.value,value:e.value},(0,s.v_)(e.label),9,u)))),128))],512),[[o.u1,m.selectedCity]])]),(0,t.bF)(o.eB,null,{default:(0,t.k6)((()=>[m.isDestinyDone?((0,t.uX)(),(0,t.CE)("div",r,[(0,t.Lk)("table",{class:"table-all",id:`item-${m.selectedShop.id}`},[(0,t.Lk)("tr",null,[l[4]||(l[4]=(0,t.Lk)("th",{class:"table-td border-b border-r w-25 text-nowrap"},"店家名稱",-1)),(0,t.Lk)("td",v,(0,s.v_)(m.selectedShop.name||"無"),1)]),(0,t.Lk)("tr",null,[l[5]||(l[5]=(0,t.Lk)("th",{class:"table-td border-b border-r w-25 text-nowrap"},"城市",-1)),(0,t.Lk)("td",b,(0,s.v_)(m.selectedShop.city||"無"),1)]),(0,t.Lk)("tr",null,[l[8]||(l[8]=(0,t.Lk)("th",{class:"table-td border-b border-r"},"地址",-1)),(0,t.Lk)("td",p,[(0,t.Lk)("a",{href:`https://www.google.com/maps/search/${encodeURIComponent(m.selectedShop.name)}`,target:"_blank",rel:"noreferrer noopener",class:"underline"},[(0,t.eW)((0,s.v_)(m.selectedShop.address||"無"),1),l[6]||(l[6]=(0,t.Lk)("br",null,null,-1)),l[7]||(l[7]=(0,t.eW)(" (前往 Google 地圖) "))],8,y)])]),(0,t.Lk)("tr",null,[l[9]||(l[9]=(0,t.Lk)("th",{class:"table-td border-b border-r"},"營業時間",-1)),(0,t.Lk)("td",h,(0,s.v_)(m.selectedShop.open_time||"無"),1)])],8,d),(0,t.Lk)("div",k,[(0,t.Lk)("button",{onClick:l[1]||(l[1]=(...e)=>m.checkout&&m.checkout(...e)),class:"button click-color-mid"}," 點擊收藏到你的口袋名單 ")])])):(0,t.Q3)("",!0)])),_:1}),l[11]||(l[11]=(0,t.Lk)("p",{class:"text-xs text-stone-400"}," 營業時間可能不同，出發前請至官方網站確認 ",-1)),(0,t.Lk)("button",{class:"btn click-color-light",onClick:l[2]||(l[2]=(0,o.D$)(((...e)=>m.getDestinyShop&&m.getDestinyShop(...e)),["prevent"])),disabled:m.isDestiny||!m.selectedCity},(0,s.v_)(m.isDestiny?"抽籤中...":"點擊進行抽籤"),9,g),l[12]||(l[12]=(0,t.Lk)("img",{class:"image",src:n,alt:"teaAndBook"},null,-1))]),(0,t.bF)(_,{visible:m.showModal,message:m.modalMessage,type:m.modalType,onClose:m.closeModal},null,8,["visible","message","type","onClose"])],64)}a(4114),a(8992),a(7550);var f=a(144),L=a(7258),C=a(2136),_=a(5785),w=a(3998),D={name:"DestinyView",components:{ModalBox:C.A},setup(){const e=(0,f.Kh)([{value:"",label:"請先選擇城市"},{value:"Keelung",label:"基隆"},{value:"taipei",label:"台北"},{value:"taoyuan",label:"桃園"},{value:"hsinchu",label:"新竹"},{value:"miaoli",label:"苗栗"},{value:"taichung",label:"台中"},{value:"changhua",label:"彰化"},{value:"nantou",label:"南投"},{value:"yunlin",label:"雲林"},{value:"chiayi",label:"嘉義"},{value:"tainan",label:"台南"},{value:"kaohsiung",label:"高雄"},{value:"pingtung",label:"屏東"},{value:"yilan",label:"宜蘭"},{value:"hualien",label:"花蓮"},{value:"taitung",label:"台東"},{value:"penghu",label:"澎湖"}]),l=(0,w.A)(),a=(0,f.KR)(""),s=(0,t.EW)((()=>l.loadingCities[a.value])),o=(0,t.EW)((()=>l.cafesByCity[a.value]||[])),{showModal:n,modalMessage:c,modalType:i,openModal:u,closeModal:r}=(0,_.A)(),{selectedShop:d,isDestiny:v,isDestinyDone:b,getDestinyShop:p}=(0,L.A)(o);(0,t.wB)(a,(async e=>{if(e)try{await l.getCafesByCity(e)}catch(a){u("取得資料失敗，請重新整理後再試一次，謝謝！","error")}else u("請選擇一個城市！","error")}));const y=()=>{const e=JSON.parse(localStorage.getItem("savedCafes")||"[]"),l=e.some((e=>e.id===d.value.id));if(l)return void u("此咖啡店已在你的口袋名單中！","error");const a={id:d.value.id,name:d.value.name,city:d.value.city,address:d.value.address,open_time:d.value.open_time};e.push(a),localStorage.setItem("savedCafes",JSON.stringify(e)),u("已成功收藏到你的口袋名單！","success")};return{selectedCity:a,options:e,selectedShop:d,allCafes:o,isLoading:s,isDestiny:v,isDestinyDone:b,getDestinyShop:p,showModal:n,closeModal:r,modalMessage:c,modalType:i,checkout:y}}},S=a(1241);const M=(0,S.A)(D,[["render",m],["__scopeId","data-v-ba0b66ca"]]);var x=M}}]);