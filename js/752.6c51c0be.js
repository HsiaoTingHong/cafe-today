"use strict";(self["webpackChunkcafe_today"]=self["webpackChunkcafe_today"]||[]).push([[752],{7258:function(e,l,t){t.d(l,{A:function(){return s}});var a=t(144);function s(e){const l=(0,a.KR)(!1),t=(0,a.KR)(!1),s=(0,a.KR)(""),n=function(e){return new Promise((l=>{setTimeout((()=>{console.log(`已等待 ${e} 毫秒`),l()}),e)}))},o=async function(){l.value=!0,t.value=!1,s.value="";try{await n(3e3);const l=Math.floor(Math.random()*e.value.length);s.value=e.value[l],t.value=!0}catch(a){console.error("抽籤過程發生錯誤:",a)}finally{l.value=!1}};return{selectedShop:s,isDestiny:l,isDestinyDone:t,getDestinyShop:o}}},594:function(e,l){const t="https://cafenomad.tw/api/v1.2/cafes/",a="https://api.allorigins.win/raw?url=",s=e=>{const l=`${t}${e}`;return`${a}${encodeURIComponent(l)}`};l.A=s},7863:function(e,l,t){t.r(l),t.d(l,{default:function(){return x}});var a=t(6768),s=t(4232),n=t(5130),o=t.p+"img/teaAndBook.0b869572.png";const r={class:"screen-center"},c={class:"container"},d=["value"],b={key:0,class:"table-border"},u={class:"table-all"},i={class:"table-td border-b"},v={class:"table-td border-b"},h=["href"],p={class:"table-td border-b"},k={class:"table-td border-b"},L={class:"table-td border-b"},g={class:"table-td border-b"},f={class:"table-td border-b"},y={class:"table-td border-b"},D={class:"table-td border-b"},_={class:"table-td url-cell"},m=["href"],w=["disabled"];function S(e,l,t,S,K,A){const C=(0,a.g2)("LoadingOverlay");return(0,a.uX)(),(0,a.CE)(a.FK,null,[(0,a.bF)(C,{active:S.isLoading,color:"#79716b"},null,8,["active"]),(0,a.Lk)("div",r,[l[15]||(l[15]=(0,a.Lk)("p",{class:"slogan"},"尋找你的咖啡靈魂",-1)),(0,a.Lk)("div",c,[l[2]||(l[2]=(0,a.Lk)("label",{for:"dropdown",class:"label"},"選擇城市：",-1)),(0,a.bo)((0,a.Lk)("select",{id:"dropdown","onUpdate:modelValue":l[0]||(l[0]=e=>S.selectedOption=e),class:"select"},[((0,a.uX)(!0),(0,a.CE)(a.FK,null,(0,a.pI)(S.options,(e=>((0,a.uX)(),(0,a.CE)("option",{key:e.value,value:e.value},(0,s.v_)(e.label),9,d)))),128))],512),[[n.u1,S.selectedOption]])]),(0,a.bF)(n.eB,null,{default:(0,a.k6)((()=>[S.isDestinyDone?((0,a.uX)(),(0,a.CE)("div",b,[(0,a.Lk)("table",u,[(0,a.Lk)("tr",null,[l[3]||(l[3]=(0,a.Lk)("th",{class:"table-td border-b border-r w-25 text-nowrap"},"店家名稱",-1)),(0,a.Lk)("td",i,(0,s.v_)(S.selectedShop.name||"無"),1)]),(0,a.Lk)("tr",null,[l[6]||(l[6]=(0,a.Lk)("th",{class:"table-td border-b border-r"},"地址",-1)),(0,a.Lk)("td",v,[(0,a.Lk)("a",{href:`https://www.google.com/maps/search/${encodeURIComponent(S.selectedShop.name)}`,target:"_blank",rel:"noreferrer noopener",class:"underline"},[(0,a.eW)((0,s.v_)(S.selectedShop.address||"無"),1),l[4]||(l[4]=(0,a.Lk)("br",null,null,-1)),l[5]||(l[5]=(0,a.eW)(" (前往 Google 地圖) "))],8,h)])]),(0,a.Lk)("tr",null,[l[7]||(l[7]=(0,a.Lk)("th",{class:"table-td border-b border-r"},"咖啡好喝",-1)),(0,a.Lk)("td",p,(0,s.v_)(S.selectedShop.tasty||"無"),1)]),(0,a.Lk)("tr",null,[l[8]||(l[8]=(0,a.Lk)("th",{class:"table-td border-b border-r"},"價格便宜",-1)),(0,a.Lk)("td",k,(0,s.v_)(S.selectedShop.cheap||"無"),1)]),(0,a.Lk)("tr",null,[l[9]||(l[9]=(0,a.Lk)("th",{class:"table-td border-b border-r"},"裝潢音樂",-1)),(0,a.Lk)("td",L,(0,s.v_)(S.selectedShop.music||"無"),1)]),(0,a.Lk)("tr",null,[l[10]||(l[10]=(0,a.Lk)("th",{class:"table-td border-b border-r"},"wifi穩定",-1)),(0,a.Lk)("td",g,(0,s.v_)(S.selectedShop.wifi||"無"),1)]),(0,a.Lk)("tr",null,[l[11]||(l[11]=(0,a.Lk)("th",{class:"table-td border-b border-r"},"插座多",-1)),(0,a.Lk)("td",f,(0,s.v_)(S.selectedShop.socket||"無"),1)]),(0,a.Lk)("tr",null,[l[12]||(l[12]=(0,a.Lk)("th",{class:"table-td border-b border-r"},"有無限時",-1)),(0,a.Lk)("td",y,(0,s.v_)(S.selectedShop.limited_time||"無"),1)]),(0,a.Lk)("tr",null,[l[13]||(l[13]=(0,a.Lk)("th",{class:"table-td border-b border-r"},"營業時間",-1)),(0,a.Lk)("td",D,(0,s.v_)(S.selectedShop.open_time||"無"),1)]),(0,a.Lk)("tr",null,[l[14]||(l[14]=(0,a.Lk)("th",{class:"table-td border-r"},"官網連結",-1)),(0,a.Lk)("td",_,[(0,a.Lk)("a",{href:S.selectedShop.url,target:"_blank",rel:"noreferrer noopener",class:"url-link"},(0,s.v_)(S.selectedShop.url||"無"),9,m)])])])])):(0,a.Q3)("",!0)])),_:1}),l[16]||(l[16]=(0,a.Lk)("p",{class:"text-xs text-stone-400"}," 營業時間可能不同，出發前請至官方網站確認 ",-1)),(0,a.Lk)("button",{class:"btn btn-start click-color-light",onClick:l[1]||(l[1]=(0,n.D$)(((...e)=>S.getDestinyShop&&S.getDestinyShop(...e)),["prevent"])),disabled:S.isDestiny||!S.selectedOption},(0,s.v_)(S.isDestiny?"抽籤中...":"點擊進行抽籤"),9,w),l[17]||(l[17]=(0,a.Lk)("img",{class:"image",src:o,alt:"teaAndBook"},null,-1))])],64)}var K=t(4373),A=t(144),C=t(594),R=t(7258),$={name:"DestinyView",setup(){const e=(0,A.KR)(""),l=(0,A.Kh)([{value:"",label:"請先選擇城市"},{value:"Keelung",label:"基隆"},{value:"taipei",label:"台北"},{value:"taoyuan",label:"桃園"},{value:"hsinchu",label:"新竹"},{value:"miaoli",label:"苗栗"},{value:"taichung",label:"台中"},{value:"changhua",label:"彰化"},{value:"nantou",label:"南投"},{value:"yunlin",label:"雲林"},{value:"chiayi",label:"嘉義"},{value:"tainan",label:"台南"},{value:"kaohsiung",label:"高雄"},{value:"pingtung",label:"屏東"},{value:"yilan",label:"宜蘭"},{value:"hualien",label:"花蓮"},{value:"taitung",label:"台東"},{value:"penghu",label:"澎湖"}]),t=(0,A.KR)([]),s=(0,A.KR)(!1),n=async function(){if(!e.value)return void console.warn("請選擇一個城市!");const l=(0,C.A)(e.value);console.log("apiUrl路徑",l),s.value=!0;try{const a=await K.A.get(l);t.value=a.data,console.log("選擇城市的咖啡店數量",e.value,t.value.length)}catch(a){console.error("API 請求失敗!",a)}finally{s.value=!1}},{selectedShop:o,isDestiny:r,isDestinyDone:c,getDestinyShop:d}=(0,R.A)(t);return(0,a.wB)(e,(e=>{e&&n()})),{selectedOption:e,options:l,selectedShop:o,shopData:t,isLoading:s,isDestiny:r,isDestinyDone:c,getData:n,getDestinyShop:d}}},I=t(1241);const O=(0,I.A)($,[["render",S],["__scopeId","data-v-e0c72d88"]]);var x=O}}]);