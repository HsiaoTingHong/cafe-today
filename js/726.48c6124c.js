"use strict";(self["webpackChunkcafe_today"]=self["webpackChunkcafe_today"]||[]).push([[726],{5785:function(e,t,s){s.d(t,{A:function(){return c}});var l=s(144);function c(){const e=(0,l.KR)(!1),t=(0,l.KR)(""),s=(0,l.KR)("success"),c=(l,c="success")=>{t.value=l,s.value=c,e.value=!0},a=()=>{e.value=!1};return{showModal:e,modalMessage:t,modalType:s,openModal:c,closeModal:a}}},9737:function(e,t,s){s(4114),s(8992),s(4520),s(2577),s(8872),s(7550);var l=s(2261);const c=(0,l.nY)("save",{state:()=>({items:[],selectedItems:[]}),getters:{totalAmount:e=>e.items.reduce(((e,t)=>e+t.address),0),itemCount:e=>e.items.length},actions:{addToSave(e){const t=JSON.parse(localStorage.getItem("savedCafes")||"[]"),s=t.some((t=>t.id===e.id));if(s)return!1;const l=this.items.find((t=>t.id===e.id));return l||this.items.push({id:e.id,name:e.name,city:e.city,address:e.address,open_time:e.open_time}),!0},removeFromSave(e){this.items=this.items.filter((t=>t.id!==e)),this.selectedItems=this.selectedItems.filter((t=>t!==e))},toggleSelectItem(e){const t=this.selectedItems.indexOf(e);-1===t?this.selectedItems.push(e):this.selectedItems.splice(t,1)},removeSelectedItems(){this.items=this.items.filter((e=>!this.selectedItems.includes(e.id))),this.selectedItems=[]},clearSave(){this.items=[],this.selectedItems=[]},checkout(){let e=JSON.parse(localStorage.getItem("savedCafes")||"[]");e=[...e,...this.items],localStorage.setItem("savedCafes",JSON.stringify(e))}}});t.A=c},2136:function(e,t,s){s.d(t,{A:function(){return u}});var l=s(6768),c=s(4232);const a={key:0,class:"modal-overlay"},i={class:"modal-type"},o={class:"modal-message light-bold-text"};var d={__name:"ModalBox",props:{visible:Boolean,message:String,type:{type:String,default:"success"}},emits:["close"],setup(e,{emit:t}){const s=e,d=(0,l.EW)((()=>"success"===s.type?"modal-text-green":"modal-text-red")),n=(0,l.EW)((()=>"success"===s.type?"成功！":"錯誤！")),r=t,u=()=>{r("close")};return(t,s)=>e.visible?((0,l.uX)(),(0,l.CE)("div",a,[(0,l.Lk)("div",{class:(0,c.C4)(["modal-box",d.value])},[(0,l.Lk)("p",i,(0,c.v_)(n.value),1),(0,l.Lk)("p",o,(0,c.v_)(e.message),1),(0,l.Lk)("button",{class:"button click-color-light",onClick:u},"確定")],2)])):(0,l.Q3)("",!0)}},n=s(1241);const r=(0,n.A)(d,[["__scopeId","data-v-584854f8"]]);var u=r},3726:function(e,t,s){s.r(t),s.d(t,{default:function(){return O}});var l=s(6768),c=(s(1454),s(4232)),a=s(144),i=s(9737),o=s(2136),d=s(5785);const n={class:"card"},r={class:"card-container"},u=["id","checked","onChange"],m=["for"],v={class:"card-text"},k={class:"dark-text"},h={class:"light-bold-text-xs"},p={class:"dark-text-xs"},g={class:"dark-text-xs"},b=["onClick"];var f={__name:"SaveItem",props:{items:{type:Array,required:!0},isSelected:{type:Function,required:!0},toggleSelect:{type:Function,required:!0},removeItem:{type:Function,required:!0}},setup(e){return(t,s)=>((0,l.uX)(),(0,l.CE)("div",n,[(0,l.Lk)("div",r,[((0,l.uX)(!0),(0,l.CE)(l.FK,null,(0,l.pI)(e.items,(t=>((0,l.uX)(),(0,l.CE)("div",{key:t.id,class:"flex items-center"},[(0,l.Lk)("input",{type:"checkbox",id:`item-${t.id}`,class:"checkbox",checked:e.isSelected(t.id),onChange:s=>e.toggleSelect(t.id)},null,40,u),(0,l.Lk)("label",{for:`item-${t.id}`,class:"light-bold-text-xs"},null,8,m),(0,l.Lk)("div",v,[(0,l.Lk)("h3",k,(0,c.v_)(t.name),1),(0,l.Lk)("p",h,(0,c.v_)(t.city),1),(0,l.Lk)("p",p,(0,c.v_)(t.address),1),(0,l.Lk)("p",g,(0,c.v_)(t.open_time),1)]),(0,l.Lk)("button",{onClick:s=>e.removeItem(t.id),class:"button click-color-mid"}," 刪除 ",8,b)])))),128))])]))}},y=s(1241);const L=(0,y.A)(f,[["__scopeId","data-v-1c2d7d09"]]);var x=L;const C={class:""},_={key:0,class:"no-data-bg"},I={key:1},S={class:"card-bg"},E={class:"flex items-center"},A=["checked"],F={class:"save-count-bg"},M={class:"save-count-container"},X={class:"light-bold-text-xl"};var R={__name:"SaveList",setup(e){const{showModal:t,modalMessage:s,modalType:n,openModal:r,closeModal:u}=(0,d.A)(),m=(0,i.A)(),v=(0,l.EW)((()=>m.items)),k=(0,l.EW)((()=>m.selectedItems)),h=(0,l.EW)((()=>m.itemCount)),p=e=>k.value.includes(e),g=e=>{m.toggleSelectItem(e)},b=e=>{e.target.checked?m.selectedItems=v.value.map((e=>e.id)):m.selectedItems=[]},f=e=>{m.removeFromSave(e)},y=()=>{m.removeSelectedItems()},L=()=>{m.checkout(),r(`收藏成功！總共收藏了 ${h.value} 間咖啡店`,"success"),m.clearSave()};return(e,i)=>{const d=(0,l.g2)("router-link");return(0,l.uX)(),(0,l.CE)(l.FK,null,[(0,l.Lk)("div",C,[i[4]||(i[4]=(0,l.Lk)("h2",{class:"title"},"收藏起來",-1)),v.value.length?((0,l.uX)(),(0,l.CE)("div",I,[(0,l.Lk)("div",S,[(0,l.Lk)("div",E,[(0,l.Lk)("input",{type:"checkbox",id:"select-all",class:"checkbox",checked:k.value.length===v.value.length,onChange:b},null,40,A),i[2]||(i[2]=(0,l.Lk)("label",{for:"select-all",class:"light-bold-text"},"全選刪除",-1))]),k.value.length>0?((0,l.uX)(),(0,l.CE)("button",{key:0,onClick:y,class:"button click-color-mid"}," 刪除已選項目 ")):(0,l.Q3)("",!0)]),(0,l.bF)(x,{items:v.value,"is-selected":p,"toggle-select":g,"remove-item":f},null,8,["items"]),(0,l.Lk)("div",F,[(0,l.Lk)("div",M,[i[3]||(i[3]=(0,l.Lk)("span",{class:"light-bold-text"},"總共收藏咖啡店:",-1)),(0,l.Lk)("span",X,"共"+(0,c.v_)(h.value)+"間",1)])]),(0,l.Lk)("div",{class:"checkout"},[(0,l.Lk)("button",{onClick:L,class:"button click-color-light"}," 確定全部收藏到你的口袋名單 ")])])):((0,l.uX)(),(0,l.CE)("div",_,[i[1]||(i[1]=(0,l.Lk)("p",{class:"no-data-text"},"你的待收藏清單是空的",-1)),(0,l.bF)(d,{to:"/list/listTaichung",href:"#",class:"button click-color-mid"},{default:(0,l.k6)((()=>i[0]||(i[0]=[(0,l.eW)(" 瀏覽台中咖啡店列表 ")]))),_:1})]))]),(0,l.bF)(o.A,{visible:(0,a.R1)(t),message:(0,a.R1)(s),type:(0,a.R1)(n),onClose:(0,a.R1)(u)},null,8,["visible","message","type","onClose"])],64)}}};const W=(0,y.A)(R,[["__scopeId","data-v-885741ca"]]);var w=W,K={__name:"SaveListView",setup(e){return(e,t)=>((0,l.uX)(),(0,l.CE)("div",null,[(0,l.bF)(w)]))}};const q=K;var O=q}}]);